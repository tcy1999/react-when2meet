(this["webpackJsonpreact-when2meet"]=this["webpackJsonpreact-when2meet"]||[]).push([[0],{44:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var n=c(6),a=c.n(n),s=c(31),r=c.n(s),i=(c(44),c(9)),o=c(34),l=c(12),u=c(22),d=c.n(u),j=c(39),m=c.n(j),b=c(10),h=c(0),O=c.n(h),f=c(3),v=c(5),p=c(1),x=c(2),y=c(19),g=c(17),N={apiKey:"AIzaSyB7j0n2NnlUhx2CHhTV7622oTn9o2ZRpp8",authDomain:"edu-umich-cyuntao-579.firebaseapp.com",projectId:"edu-umich-cyuntao-579",storageBucket:"edu-umich-cyuntao-579.appspot.com",messagingSenderId:"872388207337",appId:"1:872388207337:web:92c609be55b13530278678"},w=Object(y.f)(N),T=Object(g.c)(w),k=function(){function e(t,c,n){Object(p.a)(this,e),this.groupId=void 0,this.map=void 0,this.mapListener=void 0,this.users=void 0,this.groupId=t,this.map=new Map;var a,s=Object(v.a)(c);try{for(s.s();!(a=s.n()).done;){var r,i=a.value,o=Object(v.a)(n);try{for(o.s();!(r=o.n()).done;){var l=r.value;this.map.set("".concat(l,"-").concat(i),new Set)}}catch(u){o.e(u)}finally{o.f()}}}catch(u){s.e(u)}finally{s.f()}this.mapListener=[],this.users=new Set}return Object(x.a)(e,[{key:"fetchUsers",value:function(){var e=Object(f.a)(O.a.mark((function e(){var t,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(g.a)(T,"Users",this.groupId),e.next=3,Object(g.b)(t);case 3:(c=e.sent).exists()&&(this.users=new Set(c.data().users));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateUsers",value:function(e){this.users.add(e);var t=Object(g.a)(T,"Users",this.groupId);Object(g.d)(t,{users:Array.from(this.users)}),this.notifyListener()}},{key:"fetchData",value:function(){var e=Object(f.a)(O.a.mark((function e(){var t,c,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(g.a)(T,"Events",this.groupId),e.next=3,Object(g.b)(t);case 3:if((c=e.sent).exists()){for(a in n=c.data())this.map.set(a,new Set(n[a]));this.notifyListener()}case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addItem",value:function(){var e=Object(f.a)(O.a.mark((function e(t,c){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.map.get(t)).add(c),this.map.set(t,n),this.notifyListener(),a=Object(g.a)(T,"Events","".concat(this.groupId)),e.next=7,Object(g.b)(a);case 7:e.sent.exists()?Object(g.e)(a,Object(b.a)({},t,Array.from(n))):Object(g.d)(a,Object(b.a)({},t,Array.from(n)));case 9:case"end":return e.stop()}}),e,this)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(e,t){var c=this.map.get(e);c.delete(t),this.map.set(e,c),this.notifyListener();var n=Object(g.a)(T,"Events","".concat(this.groupId));Object(g.e)(n,Object(b.a)({},e,Array.from(c)))}},{key:"addListener",value:function(e,t){var c={id:e,callback:t};this.mapListener.push(c),t()}},{key:"removeListener",value:function(e){var t=this.mapListener.findIndex((function(t){return t.id===e}));this.mapListener.splice(t,1)}},{key:"notifyListener",value:function(){var e,t=Object(v.a)(this.mapListener);try{for(t.s();!(e=t.n()).done;){e.value.callback()}}catch(c){t.e(c)}finally{t.f()}}}]),e}(),D=void 0;function I(e,t,c){return D||(D=new k(e,t,c)),D}var S=c(4),A=function(e){var t=e.row,c=e.col,a=e.user,s=e.select,r=Object(n.useState)(s),o=Object(i.a)(r,2),l=o[0],u=o[1],d=I();return Object(S.jsx)("div",{className:m()(l?"selected":"unselected","cell"),onClick:function(){u(!l),l?d.deleteItem("".concat(c,"-").concat(t),a):d.addItem("".concat(c,"-").concat(t),a)}})},L=c(13),M=function(e){var t=e.user,c=e.rows,n=e.cols,a=I(),s=new Map(a.map);return Object(S.jsxs)("div",{className:"time-selector",children:[Object(S.jsxs)("div",{className:"d-inline-flex",children:["Unavailable",Object(S.jsx)("div",{className:"cellDisplay unselected marginleft"}),Object(S.jsx)("div",{className:"cellDisplay selected marginright"}),"Available"]}),Object(S.jsx)("div",{className:"row",children:"Click calendar cells to toggle"}),Object(S.jsxs)(L.Table,{children:[Object(S.jsx)(L.Thead,{children:Object(S.jsxs)(L.Tr,{children:[Object(S.jsx)(L.Th,{scope:"col"}),n.map((function(e){return Object(S.jsx)(L.Th,{scope:"col",children:e},e)}))]})}),Object(S.jsx)(L.Tbody,{children:c.map((function(e){return Object(S.jsxs)(L.Tr,{children:[Object(S.jsx)(L.Th,{scope:"row",children:e.split(":")[1].includes("00")&&e}),n.map((function(c){return Object(S.jsx)(L.Td,{children:Object(S.jsx)(A,{row:e,col:c,user:t,select:s.get("".concat(c,"-").concat(e)).has(t)})},"".concat(c,"-").concat(e))}))]},e)}))})]})]})},C=255,z=255,E=255,Y=17-C,U=103-z,Z=177-E,F=function(e,t){var c=e/t;return"rgb(".concat(Math.round(C+c*Y),", ").concat(Math.round(z+c*U),", ").concat(Math.round(E+c*Z),")")},B=function(e){var t=e.date,c=e.row,a=e.col,r=I(),o=Object(n.useState)(r.map.get("".concat(a,"-").concat(c))),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)(r.users),m=Object(i.a)(j,2),b=m[0],h=m[1],O=Object(n.useState)(F(u.size,b.size)),f=Object(i.a)(O,2),v=f[0],p=f[1];return Object(n.useEffect)((function(){var e="".concat(Date.now(),"-").concat(a,"-").concat(c);return r.addListener(e,(function(){d(r.map.get("".concat(a,"-").concat(c))),h(r.users),p(F(r.map.get("".concat(a,"-").concat(c)).size,r.users.size))})),function(){r.removeListener(e)}}),[]),Object(S.jsx)("div",{className:"cellDisplay",style:{backgroundColor:v},onMouseEnter:function(){document.getElementById("placeholder")&&Object(s.render)(Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h2",{children:t}),Object(S.jsxs)("div",{className:"row justify-content-center",children:[Object(S.jsxs)("div",{className:"col-md-4",children:["Available",Array.from(u.values()).map((function(e){return Object(S.jsx)("div",{children:e},e)}))]}),Object(S.jsxs)("div",{className:"col-md-4",children:["Unavailable",Array.from(b.values()).filter((function(e){return!u.has(e)})).map((function(e){return Object(S.jsx)("div",{children:e},e)}))]})]})]}),document.getElementById("placeholder"))}})},H=function(e){var t=e.startDate,c=e.timeZone,a=e.rows,s=e.cols,r=e.callback,o=I(),l=Object(n.useState)(o.users.size),u=Object(i.a)(l,2),j=u[0],m=u[1];return Object(n.useEffect)((function(){var e="".concat(Date.now(),"-TimeDisplayer");return o.addListener(e,(function(){m(o.users.size)})),function(){o.removeListener(e)}}),[]),Object(S.jsxs)("div",{className:"time-selector",children:[j>0&&Object(S.jsxs)("div",{className:"d-inline-flex w-100 justify-content-center",children:["0/".concat(j," Available"),Object(S.jsx)("div",{className:"w-100 d-inline-flex marginleft marginright",style:{border:"1px solid #ccc",maxWidth:100},children:J(0,j+1,1).map((function(e){return Object(S.jsx)("div",{style:{width:"".concat(100/j,"%"),backgroundColor:F(e,j)}},e)}))}),"".concat(j,"/").concat(j," Available")]}),Object(S.jsx)("div",{className:"row",children:"Mouseover the calendar to see who is available"}),Object(S.jsxs)(L.Table,{className:"mytable",children:[Object(S.jsx)(L.Thead,{children:Object(S.jsxs)(L.Tr,{children:[Object(S.jsx)(L.Th,{scope:"col"}),s.map((function(e){return Object(S.jsx)(L.Th,{scope:"col",children:e},e)}))]})}),Object(S.jsx)(L.Tbody,{children:a.map((function(e){return Object(S.jsxs)(L.Tr,{children:[Object(S.jsx)(L.Th,{scope:"row",children:e.split(":")[1].includes("00")&&e}),s.map((function(n,a){return Object(S.jsx)(L.Td,{onMouseEnter:function(){r(!1)},onMouseLeave:function(){r(!0)},children:Object(S.jsx)(B,{date:d()("".concat(t," ").concat(e),"YYYY-MM-DD h:mm A").add(a,"days").tz(c).format("llll z"),row:e,col:n})},"".concat(n,"-").concat(e))}))]},e)}))})]})]})},J=function(e,t,c){return Array.from({length:(t-e)/c},(function(t,n){return n*c+e}))},R=function(e){var t,c,a=e.eventName,s=e.startDate,r=e.numDays,o=e.timeZone,u=e.startTime,j=e.endTime,m=Object(n.useState)(""),b=Object(i.a)(m,2),h=b[0],O=b[1],f=Object(n.useState)(!0),v=Object(i.a)(f,2),p=v[0],x=v[1],y=Object(n.useRef)(null),g=Object(l.g)().groupId,N=J(0,r,1).map((function(e){return d()(s).tz(o).add(e,"days").format("MMM DD")})),w=(t=u,c=j,Array.from({length:c-t},(function(e,c){return c+t})).reduce((function(e,t){return e.push(d()({hour:t}).format("h:mm A")),e.push(d()({hour:t,minute:30}).format("h:mm A")),e}),[])),T=I(g,w,N);return Object(n.useEffect)((function(){return T.fetchData(),T.fetchUsers(),function(){D=void 0}}),[]),Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h1",{children:a}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md",children:h?Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"available",className:p?"notdisplay":"display",children:Object(S.jsx)("div",{id:"placeholder"})}),Object(S.jsxs)("div",{id:"timeselector",className:p?"display":"notdisplay",children:[Object(S.jsxs)("h2",{children:[h,"'s Availability",Object(S.jsx)("button",{className:"btn btn-outline-secondary marginleft",onClick:function(){O("")},children:"Sign out"})]}),Object(S.jsx)(M,{user:h,rows:w,cols:N})]})]}):Object(S.jsxs)("div",{className:"col-md",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("label",{className:"col-md-3",htmlFor:"user",children:"Your name:"}),Object(S.jsx)("div",{className:"col-md-5",children:Object(S.jsx)("input",{className:"form-control",type:"text",id:"user",ref:y})})]}),Object(S.jsx)("div",{className:"row margintop",children:Object(S.jsx)("div",{className:"offset-md-3 col-md-5",children:Object(S.jsx)("button",{className:"btn btn-outline-secondary w-100",onClick:function(){O(y.current.value),T.updateUsers(y.current.value)},children:"Sign in"})})})]})}),Object(S.jsxs)("div",{className:"col-md",children:[Object(S.jsx)("h2",{children:"Group's Availability"}),Object(S.jsx)(H,{startDate:s,timeZone:o,rows:w,cols:N,callback:x})]})]})]})},G=function(e){var t=e.groupId,c=e.callback,a=Object(n.useState)(_.eventName),s=Object(i.a)(a,2),r=s[0],l=s[1],u=Object(n.useState)(_.timeZone),j=Object(i.a)(u,2),m=j[0],b=j[1],h=Object(n.useState)(_.startDate),O=Object(i.a)(h,2),f=O[0],v=O[1],p=Object(n.useState)(_.numDays),x=Object(i.a)(p,2),y=x[0],g=x[1],N=Object(n.useState)(_.startTime),w=Object(i.a)(N,2),T=w[0],k=w[1],D=Object(n.useState)(_.endTime),I=Object(i.a)(D,2),A=I[0],L=I[1],M=Object(n.useCallback)((function(e,t,n,a,s,r){c({eventName:e,timeZone:t,startDate:n,numDays:a,startTime:s,endTime:r})}),[c]);return Object(S.jsx)("div",{id:"Home",children:Object(S.jsxs)("form",{className:"form-inline row",children:[Object(S.jsxs)("div",{className:"col-md-2",children:[Object(S.jsx)("label",{htmlFor:"event-name",children:"Event name:"}),Object(S.jsx)("input",{className:"form-control",type:"text",id:"event-name",value:r,onChange:function(e){return l(e.target.value)}})]}),Object(S.jsxs)("div",{className:"col-md-3",children:[Object(S.jsx)("label",{htmlFor:"timezone",children:"Time zone:"}),Object(S.jsx)("select",{className:"form-control",id:"timezone",value:m,onChange:function(e){return b(e.target.value)},children:d.a.tz.names().map((function(e){return Object(S.jsx)("option",{value:e,children:e},e)}))})]}),Object(S.jsxs)("div",{className:"col-md-2",children:[Object(S.jsx)("label",{htmlFor:"startday",children:"Start date:"}),Object(S.jsx)("input",{className:"form-control",type:"date",id:"startday",value:f,onChange:function(e){return v(e.target.value)}})]}),Object(S.jsxs)("div",{className:"col-md-1",children:[Object(S.jsx)("label",{htmlFor:"numday",children:"Days:"}),Object(S.jsx)("input",{className:"form-control",min:"1",max:"7",type:"number",id:"numday",value:y,onChange:function(e){return g(parseInt(e.target.value))}})]}),Object(S.jsxs)("div",{className:"col-md-2",children:[Object(S.jsx)("label",{htmlFor:"starttime",children:"Start time:"}),Object(S.jsx)("input",{className:"form-control",type:"number",id:"starttime",min:"0",max:"23",value:T,onChange:function(e){return k(parseInt(e.target.value))}})]}),Object(S.jsxs)("div",{className:"col-md-2",children:[Object(S.jsx)("label",{htmlFor:"endtime",children:"End time:"}),Object(S.jsx)("input",{className:"form-control",type:"number",id:"endtime",min:"0",max:"24",value:A,onChange:function(e){return L(parseInt(e.target.value))}})]}),Object(S.jsx)("div",{className:"d-grid linkcontainer",children:Object(S.jsx)(o.b,{to:"/react-when2meet/event/".concat(t),className:"btn btn-primary btn-block",onClick:function(){return M(r,m,f,y,T,A)},children:"Create event"})})]})})},K=c(30),V=c.n(K),W=c(63),_={eventName:"New Event",timeZone:"America/New_York",startDate:V()(new Date).format("YYYY-MM-DD"),numDays:7,startTime:8,endTime:20};var q=function(){var e=Object(n.useState)(_),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(W.a)(),r=c.eventName,u=c.timeZone,d=c.startDate,j=c.numDays,m=c.startTime,b=c.endTime;return Object(S.jsx)(o.a,{children:Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{path:"/react-when2meet",element:Object(S.jsx)(G,{groupId:s,callback:function(e){return a(e)}})}),Object(S.jsx)(l.a,{path:"/react-when2meet/event/:groupId",element:Object(S.jsx)(R,{eventName:r,timeZone:u,startDate:d,numDays:j,startTime:m,endTime:b})})]})})};r.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(q,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.56e03216.chunk.js.map